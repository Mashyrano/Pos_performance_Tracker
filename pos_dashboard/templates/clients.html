{% extends 'base.html' %}
{% block content %}
<h1>Clients</h1>

<a href="{{ url_for('add_client') }}">Add New Client</a> | 
<a href="{{ url_for('upload_clients_page') }}">Upload Clients from Excel</a>

{% if message %}
<script>
    alert("{{ message }}");
</script>
{% endif %}
<form id="filter-form" method="GET" action="{{ url_for('clients') }}">
    <label for="group-filter">Filter by Group:</label>
    <input type="text" id="group-filter" name="group" value="{{ group_filter if group_filter else '' }}">
    <input type="submit" value="Filter">
</form>
<table>
    <tr>
        <th>Merchant Name</th>
        <th>Terminal ID</th>
        <th>Physical TID</th>
        <th>Model</th>
        <th>City</th>
        <th>Group</th>
        <th>Actions</th>
    </tr>
    {% if clients %}
        {% for client in clients %}
        <tr>
            <td>{{ client.merchant_name }}</td>
            <td>{{ client.terminal_id }}</td>
            <td>{{ client.physical_tid }}</td>
            <td>{{ client.model }}</td>
            <td>{{ client.city }}</td>
            <td>{{ client.group }}</td>
            <td>
                <a href="{{ url_for('edit_client', id=client.id) }}">Edit</a>
                <form method="POST" action="{{ url_for('delete_client', id=client.id) }}" style="display:inline;">
                    <input type="submit" value="Delete">
                </form>
            </td>
        </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="7">No clients found for this group</td>
        </tr>
    {% endif %}
</table>

{% endblock %}
